(window.webpackJsonp=window.webpackJsonp||[]).push([[94],{mMj0:function(n,e,t){"use strict";t.r(e),t.d(e,"AlarmsPageModule",(function(){return g}));var i=t("Valr"),r=t("QJY3"),o=t("DUip"),c=t("sPEm"),s=t("mrSG"),a=t("9587"),b=t("Fa2m"),l=t("TYT/");function u(n,e){if(1&n){var t=l.Nb();l.Mb(0,"ion-toggle",12),l.Ub("ionChange",(function(){l.cc(t);var n=l.Wb().$implicit;return l.Wb().switchAlarm(n)})),l.Lb()}}function h(n,e){if(1&n){var t=l.Nb();l.Mb(0,"ion-toggle",13),l.Ub("ionChange",(function(){l.cc(t);var n=l.Wb().$implicit;return l.Wb().switchAlarm(n)})),l.Lb()}}function f(n,e){if(1&n){var t=l.Nb();l.Mb(0,"ion-card"),l.Mb(1,"ion-card-header",5),l.Ub("click",(function(){l.cc(t);var n=e.$implicit;return l.Wb().showDetail(n)})),l.Mb(2,"ion-card-title"),l.gc(3),l.Lb(),l.Lb(),l.Mb(4,"ion-card-content"),l.Mb(5,"ion-grid"),l.Mb(6,"ion-row"),l.Mb(7,"ion-col",5),l.Ub("click",(function(){l.cc(t);var n=e.$implicit;return l.Wb().showDetail(n)})),l.Mb(8,"p",6),l.gc(9),l.Lb(),l.Lb(),l.Mb(10,"ion-col",5),l.Ub("click",(function(){l.cc(t);var n=e.$implicit;return l.Wb().showDetail(n)})),l.Mb(11,"p",7),l.gc(12),l.Lb(),l.Lb(),l.Mb(13,"ion-col"),l.fc(14,u,1,0,"ion-toggle",8),l.fc(15,h,1,0,"ion-toggle",9),l.Lb(),l.Mb(16,"ion-col"),l.Mb(17,"ion-button",10),l.Ub("click",(function(){l.cc(t);var n=e.index;return l.Wb().showDelete(n)})),l.Kb(18,"ion-icon",11),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb()}if(2&n){var i=e.$implicit;l.zb(3),l.hc(" ",i.name," "),l.zb(6),l.ic("Time: ",i.hour,":",i.min,""),l.zb(3),l.hc(" Days: [",i.days.join(","),"] "),l.zb(2),l.Zb("ngIf",i.on),l.zb(1),l.Zb("ngIf",!i.on)}}var d=[{path:"",component:function(){function n(n,e,t){this.rpiService=n,this.helper=e,this.router=t,this.loading=!1}return n.prototype.ionViewWillEnter=function(){this.loading=!0,Object(s.b)(this,void 0,void 0,(function(){return Object(s.e)(this,(function(n){return this.getAlarms(),[2]}))}))},n.prototype.getAlarms=function(){return Object(s.b)(this,void 0,void 0,(function(){var n=this;return Object(s.e)(this,(function(e){switch(e.label){case 0:return this.loading=!0,[4,this.helper.presentLoading("Loading Alarms")];case 1:return e.sent(),[4,this.rpiService.getAlarms()];case 2:return e.sent().subscribe((function(e){n.alarms=e,n.alarms.forEach((function(n,e){n.idx=e})),Object(s.b)(n,void 0,void 0,(function(){return Object(s.e)(this,(function(n){switch(n.label){case 0:return[4,this.helper.hideLoading()];case 1:return n.sent(),[2]}}))})),n.loading=!1}),(function(e){n.error=e.message})),[2]}}))}))},n.prototype.doRefresh=function(n){this.loading=!0,Object(s.b)(this,void 0,void 0,(function(){return Object(s.e)(this,(function(e){switch(e.label){case 0:if(n)try{n.target.complete()}catch(t){}return[4,this.getAlarms()];case 1:return e.sent(),[2]}}))}))},n.prototype.showDelete=function(n){return Object(s.b)(this,void 0,void 0,(function(){var e=this;return Object(s.e)(this,(function(t){switch(t.label){case 0:return[4,this.helper.presentAlert({header:"Delete",subHeader:"Alarm with index "+n,message:"Do you Really want to Delete this Alarm?",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Delete",cssClass:"danger",handler:function(){return Object(s.b)(e,void 0,void 0,(function(){var e=this;return Object(s.e)(this,(function(t){switch(t.label){case 0:return[4,this.rpiService.deleteAlarm(n)];case 1:return t.sent().subscribe((function(n){e.alarms=n})),[2]}}))}))}}]})];case 1:return t.sent(),[2]}}))}))},n.prototype.showDetail=function(n){this.router.navigate(["alarm-detail",JSON.stringify(n)])},n.prototype.newAlarm=function(){this.router.navigate(["alarm-detail",JSON.stringify({})])},n.prototype.saveAlarm=function(n){return Object(s.b)(this,void 0,void 0,(function(){var e=this;return Object(s.e)(this,(function(t){switch(t.label){case 0:return this.loading?[3,3]:[4,this.helper.presentLoading("Switch Alarm")];case 1:return t.sent(),[4,this.rpiService.changeAlarm(n)];case 2:t.sent().subscribe((function(n){e.helper.hideLoading()})),t.label=3;case 3:return[2]}}))}))},n.prototype.switchAlarm=function(n){return Object(s.b)(this,void 0,void 0,(function(){return Object(s.e)(this,(function(e){switch(e.label){case 0:return n.on=!n.on,[4,this.saveAlarm(n)];case 1:return e.sent(),[2]}}))}))},n.\u0275fac=function(e){return new(e||n)(l.Jb(a.b),l.Jb(b.a),l.Jb(o.g))},n.\u0275cmp=l.Db({type:n,selectors:[["app-alarms"]],decls:13,vars:1,consts:[["slot","start"],["vertical","bottom","horizontal","end","slot","fixed",3,"click"],["name","add"],["slot","fixed",3,"ionRefresh"],[4,"ngFor","ngForOf"],[3,"click"],["ion-align-self-start",""],["ion-align-self-center",""],["ion-align-self-end","","checked","","color","success",3,"ionChange",4,"ngIf"],["ion-align-self-end","","color","success",3,"ionChange",4,"ngIf"],["color","danger",3,"click"],["name","trash","slot","icon-only"],["ion-align-self-end","","checked","","color","success",3,"ionChange"],["ion-align-self-end","","color","success",3,"ionChange"]],template:function(n,e){1&n&&(l.Mb(0,"ion-header"),l.Mb(1,"ion-toolbar"),l.Mb(2,"ion-buttons",0),l.Kb(3,"ion-menu-button"),l.Lb(),l.Mb(4,"ion-title"),l.gc(5,"Alarms "),l.Lb(),l.Lb(),l.Lb(),l.Mb(6,"ion-content"),l.Mb(7,"ion-fab",1),l.Ub("click",(function(){return e.newAlarm()})),l.Mb(8,"ion-fab-button"),l.Kb(9,"ion-icon",2),l.Lb(),l.Lb(),l.Mb(10,"ion-refresher",3),l.Ub("ionRefresh",(function(n){return e.doRefresh(n)})),l.Kb(11,"ion-refresher-content"),l.Lb(),l.fc(12,f,19,6,"ion-card",4),l.Lb()),2&n&&(l.zb(12),l.Zb("ngForOf",e.alarms))},directives:[c.s,c.H,c.g,c.x,c.F,c.o,c.p,c.q,c.t,c.y,c.z,i.h,c.h,c.j,c.l,c.i,c.r,c.B,c.n,i.i,c.f,c.G,c.b],styles:[""]}),n}()}],g=function(){function n(){}return n.\u0275mod=l.Hb({type:n}),n.\u0275inj=l.Gb({factory:function(e){return new(e||n)},imports:[[i.b,r.a,c.I,o.i.forChild(d)]]}),n}()}}]);